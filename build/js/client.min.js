require.config({paths:{common:"../../Common","common.ballGame":"../../Common/ballGame"}}),define(["./ballGame/libs/Box2dWeb-2.1.a.3.min"]);
var game=angular.module("Game",[]);game.controller("BingoGameCtrl",function(){var o=io.connect("http://localhost:9999");o.on("news",function(e){console.log(e),o.emit("other",{shoes:!0})})});
define(["./config","assetLoader","./ballGame/clientGameBoard","./utils/xStats","./utils/shims","../../Common/utils/extender"],function(e,s,t,u){function n(){var e=430,s=557,n=new t(e,s);n.init(),setInterval(function(){n.tick()},1e3/60);var c=function(){window.requestAnimationFrame(c),u.begin(),n.render(),u.end()};window.requestAnimationFrame(c)}s.pushAsset("board","images/gameBoards/board1.png"),s.pushAsset("peg","images/pegs/blue_peg.png",{x:13,y:9}),s.pushAsset("pegHit","images/pegs/blue_peg_lit_overlay.png"),s.pushAsset("cannon","images/cannons/shooter.png"),s.pushAsset("cannonBall","images/cannonBalls/ball_noshine.png"),s.pushAsset("chuteBuckets","images/chutes/buckets.png"),s.pushAsset("chuteBumpers","images/chutes/bumpers.png"),s.pushAsset("chuteGreenBucket","images/chutes/green_bucket.png"),s.pushAsset("chutePurpleBucket","images/chutes/purple_bucket.png"),s.pushAsset("chuteRedBucket","images/chutes/red_bucket.png"),s.pushAsset("chuteYellowBucket","images/chutes/yellow_bucket.png"),s.pushAsset("chuteBlueBucket","images/chutes/blue_bucket.png"),s.pushAsset("chuteGreenBucketLit","images/chutes/green_bucket_lit.png"),s.pushAsset("chutePurpleBucketLit","images/chutes/purple_bucket_lit.png"),s.pushAsset("chuteRedBucketLit","images/chutes/red_bucket_lit.png"),s.pushAsset("chuteYellowBucketLit","images/chutes/yellow_bucket_lit.png"),s.pushAsset("chuteBlueBucketLit","images/chutes/blue_bucket_lit.png"),s.pushAsset("jackpotOverlay","images/overlays/jackpot_shooter_overlay.png"),s.pushAsset("coinBoxOverlay","images/overlays/coin_box.png"),s.pushAsset("pullBoxOverlay","images/overlays/pulls_button.png"),s.loadAssets(n)});
define(["assetLoader","canvasUtils","clickManager","common.ballGame/gameBoard","./planes/clientBackgroundPlane","./planes/clientPegsPlane","./planes/clientCannonPlane","./planes/clientChutesPlane","./planes/clientCannonBallPlane","./planes/clientOverlaysPlane","./clientPegPhysicsManager","./clientGameModel"],function(e,n,a,l,s,i,t,r,h,o,d,c){function P(e,n){this.gameModel=new c(e,n),this.backgroundPlane=new s(this.gameModel),this.pegsPlane=new i(this,this.gameModel),this.cannonBallPlane=new h(this,this.gameModel),this.cannonPlane=new t(this,this.gameModel),this.chutesPlane=new r(this,this.gameModel),this.overlaysPlane=new o(this,this.gameModel),this.pegPhysicsManager=new d(this.gameModel,1),this.gameModel.clickManager=new a(this.gameModel)}return P.prototype.init=function(){this.$super();var e=document.getElementById(this.gameModel.elementId);this.backgroundPlane.init(),this.overlaysPlane.init(),this.gameModel.clickManager.init(),e.appendChild(this.backgroundPlane.plane.canvas),e.appendChild(this.chutesPlane.backPlane.canvas),e.appendChild(this.cannonBallPlane.plane.canvas),e.appendChild(this.cannonPlane.plane.canvas),e.appendChild(this.chutesPlane.frontPlane.canvas),e.appendChild(this.pegsPlane.plane.canvas),e.appendChild(this.overlaysPlane.plane.canvas),e.appendChild(this.pegPhysicsManager.plane.canvas),e.appendChild(this.gameModel.clickManager.element)},P.prototype.roundOver=function(){this.pegPhysicsManager.roundOver(!1),this.backgroundPlane.roundOver(!1),this.cannonPlane.roundOver(!1),this.chutesPlane.roundOver(!1),this.pegsPlane.roundOver(!1),this.overlaysPlane.roundOver(!1),this.cannonBallPlane.roundOver(!1),setTimeout(function(){this.pegPhysicsManager.roundOver(!0),this.backgroundPlane.roundOver(!0),this.cannonPlane.roundOver(!0),this.chutesPlane.roundOver(!0),this.pegsPlane.roundOver(!0),this.overlaysPlane.roundOver(!0),this.cannonBallPlane.roundOver(!0)}.bind(this),2500)},P.prototype.render=function(){this.pegPhysicsManager.render(),this.backgroundPlane.render(),this.cannonPlane.render(),this.chutesPlane.render(),this.pegsPlane.render(),this.overlaysPlane.render(),this.cannonBallPlane.render()},P.prototype.tick=function(){this.$super(),this.backgroundPlane.tick(),this.overlaysPlane.tick()},P.extend(l)});
define(["common.ballGame/gameModel"],function(e){function n(e,n){this.$super(e,n),this.elementId="ballGameBoard",this.clickManager=void 0}return n.extend(e)});
define(["canvasUtils","common.ballGame/pegPhysicsManager"],function(e,i){function t(e,i){this.$super(e),this.shouldDraw=i}{var a=(Box2D.Common.Math.b2Vec2,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2Body,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2World,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape,Box2D.Collision.Shapes.b2CircleShape,Box2D.Dynamics.b2DebugDraw);Box2D.Dynamics.b2ContactListener}return t.prototype.init=function(){if(this.$super(),this.plane=e.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight),this.shouldDraw){var i=new a;i.SetSprite(this.plane.context),i.SetDrawScale(this.getMeterPixelSize()),i.SetFillAlpha(.4),i.SetLineThickness(4),i.SetFlags(a.e_shapeBit|a.e_jointBit),this.world.SetDebugDraw(i)}},t.prototype.render=function(){this.shouldDraw&&this.world.DrawDebugData()},t.extend(i)});
define("assetLoader",[],function(){function t(){this.assets={}}function e(t,e){this.location=t,this.loaded=!1,this.image=void 0,this.width=0/0,this.height=0/0,this.center=e}function i(t,e){var i=document.createElement("img");return i.src=t.location,i.onload=function(){t.image=i,t.width=i.width,t.height=i.height,t.center||(t.center={x:t.width/2,y:t.height/2}),e()},i}return t.prototype.pushAsset=function(t,i,n){this.assets[t]=new e(i,n)},t.prototype.getAsset=function(t){return this.assets[t]},t.prototype.loadAssets=function(t){var e=this.assets,n=Object.keys(e),s=0,o=function(){return s==n.length?void t():void i(e[n[s]],function(){s++,o()})};o()},new t});
define("canvasUtils",[],function(){function t(t,e){var a=document.createElement("canvas");a.width=t,a.height=e;var c=a.getContext("2d");return new n(a,c)}function n(t,n){this.canvas=t,this.context=n}return n.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},{createCanvas:t}});
define("clickManager",[],function(){function e(e){this.clickRects=[],this.element=void 0,this.gameModel=e}return e.prototype.pushClickRect=function(e){this.clickRects.push(e)},e.prototype.init=function(){this.element=document.createElement("div"),this.element.className="clickManager",this.element.style.width=this.gameModel.boardWidth+"px",this.element.style.height=this.gameModel.boardHeight+"px",this.element.onmousedown=function(e){this.processMouseEvent("mouseDown",e)}.bind(this),this.element.ontouchstart=function(e){this.processMouseEvent("mouseDown",e)}.bind(this),this.element.onmouseup=function(e){this.processMouseEvent("mouseUp",e)}.bind(this),this.element.ontouchend=function(e){this.processMouseEvent("mouseUp",e)}.bind(this),this.element.onmousemove=function(e){this.processMouseEvent("mouseMove",e)}.bind(this),this.element.ontouchmove=function(e){this.processMouseEvent("mouseMove",e)}.bind(this)},e.prototype.processMouseEvent=function(e,t){var s,o;if(t.touches?t.touches.length>0?(s=t.touches[0].pageX-t.touches[0].target.offsetLeft,o=t.touches[0].pageY-t.touches[0].target.offsetTop):(s=t.changedTouches[0].pageX-t.changedTouches[0].target.offsetLeft,o=t.changedTouches[0].pageY-t.changedTouches[0].target.offsetTop):(s=t.pageX-t.target.offsetLeft,o=t.pageY-t.target.offsetTop),"mouseUp"==e)for(var n=0;n<this.clickRects.length;n++){var i=this.clickRects[n];i.eventToTrigger.call(i.instance,e,i,s-i.x,o-i.y,i.collides(s,o))}else for(var n=0;n<this.clickRects.length;n++){var i=this.clickRects[n];if(i.collides(s,o)&&i.eventToTrigger.call(i.instance,e,i,s-i.x,o-i.y,!0))break}t.preventDefault()},e});
define("clickRect",[],function(){function t(t,i,h,s,e,n){this.x=t,this.y=i,this.width=h,this.height=s,this.instance=e,this.eventToTrigger=n}return t.prototype.collides=function(t,i){return this.x<t&&this.x+this.width>t&&this.y<i&&this.y+this.height>i},t});
define([],function(){!function(){for(var n=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),a=Math.max(0,16-(e-n)),o=window.setTimeout(function(){i(e+a)},a);return n=e+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}()});
define(["../../libs/stats.min"],function(){var e=new Stats;return e.setMode(0),e.domElement.style.position="absolute",e.domElement.style.right="0px",e.domElement.style.top="0px",document.body.appendChild(e.domElement),e});
define(["assetLoader","clickRect","common.ballGame/pieces/cannon"],function(n,e,t){function o(n,e){this.gameModel=n,this.cannonAsset=void 0,this.canonPlane=e,this.movingCannon=!1}return o.prototype.init=function(){this.$super(),this.cannonAsset=n.getAsset("cannon");var t=this.gameModel.cannonLocation;this.gameModel.clickManager.pushClickRect(new e(t.x-2*this.cannonAsset.image.width,t.y,4*this.cannonAsset.image.width,this.cannonAsset.image.height,this,this.shootBall)),this.gameModel.clickManager.pushClickRect(new e(0,0,this.gameModel.boardWidth,this.gameModel.boardHeight,this,this.rotateClick))},o.prototype.render=function(n){var e=this.gameModel.cannonLocation,t=this.cannonAsset.image;n.save(),n.translate(e.x-t.width/2,e.y),n.translate(t.width/2,-t.height),n.rotate(this.gameModel.cannonAngle*Math.PI/180),n.drawImage(t,-t.width/2,t.height),n.restore()},o.prototype.rotateClick=function(n,e,t,o){switch(n){case"mouseUp":this.movingCannon=!1;break;case"mouseDown":this.movingCannon=!0;case"mouseMove":if(this.movingCannon){var a=180*Math.atan2(o-this.gameModel.cannonLocation.y,t-this.gameModel.cannonLocation.x)/Math.PI-90;this.gameModel.cannonAngle=a}}this.gameModel.cannonAngle<-30&&(this.gameModel.cannonAngle=-30),this.gameModel.cannonAngle>30&&(this.gameModel.cannonAngle=30)},o.prototype.shootBall=function(n,e,t,o,a){switch(n){case"mouseUp":a&&this.canonPlane.shootBall();break;case"mouseDown":case"mouseMove":if(a)return!0}},o.extend(t)});
define(["assetLoader","./clientPeg","./clientChute","common.ballGame/pieces/cannonBall"],function(e,t,a,i){function s(e,t,a,i,s){this.gameBoard=e,this.gameModel=t,this.x=a,this.y=i,this.angle=s,this.velocity=25,this.body=void 0,this.ballDead=!1}return s.prototype.render=function(t){if(!this.ballDead){var a=this.body.GetPosition(),i=this.gameBoard.pegPhysicsManager.meterToPixel(a.x),s=this.gameBoard.pegPhysicsManager.meterToPixel(a.y);t.save(),t.translate(i,s);var n=e.getAsset("cannonBall").image;t.translate(-n.width/2,-n.height/2),t.translate(n.width/2,n.height/2),t.rotate(this.body.GetAngle()),t.drawImage(n,-n.width/2,-n.height/2),t.restore()}},s.extend(i)});
define(["assetLoader","common.ballGame/pieces/chute"],function(t,e){function s(t,e,s,h){this.gameModel=t,this.chuteAssets=[],this.chuteAssetsLit=[],this.chuteIndex=s,this.chutePlane=e,this.chuteLocation=h,this.triggered=!1,this.blinking=!1,this.ticking=0,this.chuteNumber=parseInt(30*Math.random())}return s.prototype.init=function(){this.$super(),this.chuteAssets.push(t.getAsset("chuteBlueBucket")),this.chuteAssets.push(t.getAsset("chuteGreenBucket")),this.chuteAssets.push(t.getAsset("chuteYellowBucket")),this.chuteAssets.push(t.getAsset("chuteRedBucket")),this.chuteAssets.push(t.getAsset("chutePurpleBucket")),this.chuteAssetsLit.push(t.getAsset("chuteBlueBucketLit")),this.chuteAssetsLit.push(t.getAsset("chuteGreenBucketLit")),this.chuteAssetsLit.push(t.getAsset("chuteYellowBucketLit")),this.chuteAssetsLit.push(t.getAsset("chuteRedBucketLit")),this.chuteAssetsLit.push(t.getAsset("chutePurpleBucketLit"))},s.prototype.render=function(t){this.ticking++;var e,s=this.chuteLocation;if(this.blinking)e=!(this.ticking%10<4);else{e=this.ticking%50<10*(this.chuteIndex+1)&&this.ticking%50>10*this.chuteIndex;for(var h=0;h<this.chutePlane.chutes.length;h++){var i=this.chutePlane.chutes[h];if(i.blinking){e=!1;break}}}var u=(e?this.chuteAssetsLit:this.chuteAssets)[this.chuteIndex].image;if(t.save(),t.translate(s.x,s.y),e){var c=(this.chuteAssetsLit[this.chuteIndex].width-this.chuteAssets[this.chuteIndex].width)/2,n=(this.chuteAssetsLit[this.chuteIndex].width-this.chuteAssets[this.chuteIndex].width)/2;t.translate(-c,-n)}t.drawImage(u,0,0),t.restore(),t.save(),t.translate(s.x,s.y),t.translate(this.chuteAssets[this.chuteIndex].width/2,this.chuteAssets[this.chuteIndex].height/2);var r=25;t.fillStyle="white",t.font="bold "+r+"px Arial",t.shadowColor="#72C9FC",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=5;var a=this.chuteNumber.toString(),l=t.measureText(a);t.fillText(a,-l.width/2,8),t.restore()},s.extend(e)});
define(["assetLoader","common.ballGame/pieces/peg"],function(t,i){function e(t,i,e,s){this.x=e,this.y=s,this.hit=!1,this.gameBoard=t,this.gameModel=i,this.body=void 0,this.bonus=parseInt(400*Math.random()),this.ticking=void 0,this.tocking=0,this.blinking=!1}return e.prototype.init=function(){this.$super()},e.prototype.render=function(i){this.tocking++,i.save(),i.translate(this.x,this.y);var e;e=t.getAsset(this.blinking?this.tocking%20<10?"pegHit":"peg":this.hit?"pegHit":"peg"),i.translate(-e.center.x,-e.center.y),i.drawImage(e.image,0,0),i.restore()},e.prototype.renderText=function(t){if(this.ticking){this.ticking--;var i=parseInt(this.ticking/4);t.save(),t.translate(this.x,this.y),t.translate(0,-25+i);var e=17;t.fillStyle="white",t.font="bold "+e+"px Arial",t.shadowColor="#72C9FC",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=5;var s="+$"+this.bonus.toString(),n=t.measureText(s);t.fillText(s,-n.width/2,-e/2),t.restore(),0==this.ticking&&(this.ticking=void 0)}},e.extend(i)});
define(["canvasUtils","assetLoader"],function(t,e){function o(t){this.plane=void 0,this.gameModel=t}return o.prototype.init=function(){this.plane=t.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight)},o.prototype.tick=function(){},o.prototype.roundOver=function(){},o.prototype.render=function(){var t=this.plane.context;t.save(),t.drawImage(e.getAsset("board").image,0,0),t.restore()},o});
define(["canvasUtils","common.ballGame/planes/cannonBallPlane","../pieces/clientCannonBall"],function(n,e,a){function t(n,e){this.plane=void 0,this.gameBoard=n,this.gameModel=e,this.cannonBall=void 0,this.cannonBallInstance=a}return t.prototype.init=function(){this.$super(),this.plane=n.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight)},t.prototype.roundOver=function(n){this.$super(n),n&&this.plane.clear()},t.prototype.render=function(){if(this.cannonBall){this.plane.clear();var n=this.plane.context;n.save(),this.cannonBall.render(n),n.restore()}},t.extend(e)});
define(["canvasUtils","common.ballGame/planes/cannonPlane","../pieces/clientCannon"],function(e,n,t){function a(e,n){this.plane=void 0,this.gameModel=n,this.gameBoard=e,this.cannon=new t(this.gameModel,this)}return a.prototype.init=function(){this.$super(),this.plane=e.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight)},a.prototype.render=function(){this.plane.clear();var e=this.plane.context;e.save(),this.cannon.render(e),e.restore()},a.extend(n)});
define(["canvasUtils","assetLoader","common.ballGame/planes/chutesPlane","../pieces/clientChute"],function(e,t,s,a){function i(e,t){this.backPlane=void 0,this.frontPlane=void 0,this.gameModel=t,this.gameBoard=e,this.bumpersAsset=void 0,this.bucketsAsset=void 0,this.chutes=[],this.chuteInstance=a}return i.prototype.init=function(){this.$super(),this.backPlane=e.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight),this.frontPlane=e.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight),this.bumpersAsset=t.getAsset("chuteBumpers"),this.bucketsAsset=t.getAsset("chuteBuckets")},i.prototype.render=function(){this.backPlane.clear(),this.frontPlane.clear();var e=this.backPlane.context,t=this.frontPlane.context;e.save(),e.translate(0,this.gameModel.boardHeight-this.bumpersAsset.height),e.drawImage(this.bumpersAsset.image,0,0),e.restore(),e.save(),e.translate(18,this.gameModel.boardHeight-this.bucketsAsset.height),e.drawImage(this.bucketsAsset.image,0,0),e.restore();for(var s=0;s<this.chutes.length;s++){var a=this.chutes[s];a.render(t)}},i.extend(s)});
define(["canvasUtils","assetLoader"],function(t,e){function o(t,e){this.plane=void 0,this.gameModel=e,this.gameBoard=t,this.jackpotOverlay=void 0,this.coinBoxOverlay=void 0,this.pullBoxOverlay=void 0,this.jackpotOverlayPosition={x:this.gameModel.boardWidth/2,y:0},this.coinBoxOverlayPosition={x:70,y:0},this.pullBoxOverlayPosition={x:351,y:0}}function i(t){t.save(),t.translate(this.jackpotOverlayPosition.x,this.jackpotOverlayPosition.y),t.translate(-this.jackpotOverlay.width/2,0),t.drawImage(this.jackpotOverlay.image,0,0),t.restore(),t.save(),t.translate(this.jackpotOverlayPosition.x,this.jackpotOverlayPosition.y),t.translate(0,46);var e=15;t.fillStyle="white",t.font="bold "+e+"px Arial";var o=t.measureText(this.gameModel.jackpotScore.toString());t.fillText(this.gameModel.jackpotScore.toString(),-o.width/2,-e/2),t.restore()}function a(t){t.save(),t.translate(this.coinBoxOverlayPosition.x,this.coinBoxOverlayPosition.y),t.translate(-this.coinBoxOverlay.width/2,0),t.drawImage(this.coinBoxOverlay.image,0,0),t.restore(),t.save(),t.translate(this.coinBoxOverlayPosition.x,this.coinBoxOverlayPosition.y),t.translate(0,33);var e=15;t.fillStyle="white",t.font="bold "+e+"px Arial";var o=t.measureText(this.gameModel.numberOfCoins.toString());t.fillText(this.gameModel.numberOfCoins.toString(),-o.width/2,-e/2),t.restore()}function l(t){t.save(),t.translate(this.pullBoxOverlayPosition.x,this.pullBoxOverlayPosition.y),t.translate(-this.pullBoxOverlay.width/2,0),t.drawImage(this.pullBoxOverlay.image,0,0),t.restore(),t.save(),t.translate(this.pullBoxOverlayPosition.x,this.pullBoxOverlayPosition.y),t.translate(0,34);var e=15;t.fillStyle="white",t.font="bold "+e+"px Arial";var o=t.measureText(this.gameModel.numberOfPulls.toString());t.fillText(this.gameModel.numberOfPulls.toString(),-o.width/2,-e/2),t.restore()}return o.prototype.init=function(){this.plane=t.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight),this.jackpotOverlay=e.getAsset("jackpotOverlay"),this.coinBoxOverlay=e.getAsset("coinBoxOverlay"),this.pullBoxOverlay=e.getAsset("pullBoxOverlay")},o.prototype.roundOver=function(t){t&&(this.gameModel.jackpotScore+=this.gameModel.interRoundBonus,this.gameModel.interRoundBonus=0)},o.prototype.tick=function(){},o.prototype.render=function(){this.plane.clear();var t=this.plane.context;i.call(this,t),a.call(this,t),l.call(this,t)},o});
define(["canvasUtils","../pieces/clientPeg","common.ballGame/planes/pegsPlane"],function(e,t,a){function n(e,a){this.plane=void 0,this.gameModel=a,this.gameBoard=e,this.pegInstance=t}return n.prototype.init=function(){this.$super(),this.plane=e.createCanvas(this.gameModel.boardWidth,this.gameModel.boardHeight)},n.prototype.render=function(){this.plane.clear();for(var e=this.plane.context,t=0;t<this.gameModel.pegs.length;t++){var a=this.gameModel.pegs[t];a.render(e)}for(var t=0;t<this.gameModel.pegs.length;t++){var a=this.gameModel.pegs[t];a.renderText(e)}},n.extend(a)});
define(["./planes/pegsPlane","./planes/cannonPlane","./planes/chutesPlane","./planes/cannonBallPlane","./pegPhysicsManager","./gameModel"],function(n,e,s,t,a,i){function h(h,l){this.gameModel=new i(h,l),this.pegsPlane=new n(this,this.gameModel),this.cannonBallPlane=new t(this,this.gameModel),this.cannonPlane=new e(this,this.gameModel),this.chutesPlane=new s(this,this.gameModel),this.pegPhysicsManager=new a(this.gameModel),this.onRoundOver=function(){}}return h.prototype.init=function(){this.pegPhysicsManager.init(),this.chutesPlane.init(),this.cannonBallPlane.init(),this.cannonPlane.init(),this.pegsPlane.init();for(var n=[],e=0;200>e;e+=50)n.push({x:62,y:201+e}),n.push({x:101,y:178+e}),n.push({x:145,y:173+e}),n.push({x:188,y:184+e}),n.push({x:226,y:207+e}),n.push({x:262,y:224+e}),n.push({x:301,y:235+e}),n.push({x:345,y:231+e}),n.push({x:380,y:213+e});this.pegsPlane.loadPegs(n)},h.prototype.fireCannon=function(){this.cannonBallPlane.fireCannonBall()},h.prototype.roundOver=function(){this.pegPhysicsManager.roundOver(!1),this.cannonPlane.roundOver(!1),this.chutesPlane.roundOver(!1),this.pegsPlane.roundOver(!1),this.cannonBallPlane.roundOver(!1),this.pegPhysicsManager.roundOver(!0),this.cannonPlane.roundOver(!0),this.chutesPlane.roundOver(!0),this.pegsPlane.roundOver(!0),this.cannonBallPlane.roundOver(!0),this.onRoundOver()},h.prototype.tick=function(){this.pegPhysicsManager.tick(),this.cannonPlane.tick(),this.chutesPlane.tick(),this.pegsPlane.tick(),this.cannonBallPlane.tick()},h.extend(Object)});
define([],function(){function n(n,t){this.boardWidth=n,this.boardHeight=t,this.pegs=[],this.cannonLocation={x:this.boardWidth/2,y:0},this.cannonAngle=0,this.jackpotScore=0,this.numberOfCoins=2567,this.numberOfPulls=15,this.interRoundBonus=0}return n.extend(Object)});
define([],function(){function e(e){this.world=void 0,this.gameModel=e}var t=Box2D.Common.Math.b2Vec2,i=Box2D.Dynamics.b2BodyDef,o=Box2D.Dynamics.b2Body,r=Box2D.Dynamics.b2FixtureDef,s=(Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2World),a=(Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape),n=Box2D.Collision.Shapes.b2CircleShape,l=(Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2ContactListener);return e.prototype.init=function(){this.world=new s(new t(0,35),!0),this.createRectangleWall(0,-this.gameModel.boardHeight,1,2*this.gameModel.boardHeight,"wall"),this.createRectangleWall(this.gameModel.boardWidth,-this.gameModel.boardHeight,1,2*this.gameModel.boardHeight,"wall"),this.createRectangleWall(0,this.gameModel.boardHeight,this.gameModel.boardWidth,1,"wall"),this.collisions=[];var e=new l;e.BeginContact=function(e){e.GetFixtureA().GetBody().GetUserData()&&e.GetFixtureA().GetBody().GetUserData().collide&&this.collisions.push({objA:e.GetFixtureA().GetBody().GetUserData(),objB:e.GetFixtureB().GetBody().GetUserData()}),e.GetFixtureB().GetBody().GetUserData()&&e.GetFixtureB().GetBody().GetUserData().collide&&this.collisions.push({objA:e.GetFixtureB().GetBody().GetUserData(),objB:e.GetFixtureA().GetBody().GetUserData()})}.bind(this),this.world.SetContactListener(e)},e.prototype.tick=function(){this.collisions=[],this.world.Step(1/60,10,10),this.world.ClearForces();for(var e=0;e<this.collisions.length;e++){var t=this.collisions[e];t.objA.collide(t.objB)}},e.prototype.roundOver=function(){},e.prototype.createRectangleWall=function(e,t,s,n,l){var h=new r;h.density=1,h.friction=1,h.restitution=.6;var p=new i;p.type=o.b2_staticBody,p.position.x=this.pixelToMeter(e)+this.pixelToMeter(s)/2,p.position.y=this.pixelToMeter(t)+this.pixelToMeter(n)/2,h.shape=new a,h.shape.SetAsBox(this.pixelToMeter(s)/2,this.pixelToMeter(n)/2);var d=this.world.CreateBody(p);return d.CreateFixture(h),d.SetUserData(l),d},e.prototype.createRectangleSensor=function(e,t,s,n,l){var h=new r;h.density=1,h.friction=1,h.restitution=.6;var p=new i;p.type=o.b2_staticBody,p.position.x=this.pixelToMeter(e)+this.pixelToMeter(s)/2,p.position.y=this.pixelToMeter(t)+this.pixelToMeter(n)/2,h.shape=new a,h.shape.SetAsBox(this.pixelToMeter(s)/2,this.pixelToMeter(n)/2);var d=this.world.CreateBody(p),c=d.CreateFixture(h);return c.SetSensor(!0),d.SetUserData(l),d},e.prototype.createCircleWall=function(e,t,s,a){var l=new r;l.density=1,l.friction=1,l.restitution=.6;var h=new i;h.type=o.b2_staticBody,l.shape=new n(this.pixelToMeter(s)),h.position.x=this.pixelToMeter(e),h.position.y=this.pixelToMeter(t);var p=this.world.CreateBody(h);return p.CreateFixture(l),p.SetUserData(a),p},e.prototype.createPeg=function(e,t,s){var a=new r;a.density=1,a.friction=1,a.restitution=.6;var l=new i;l.type=o.b2_staticBody,a.shape=new n(.5),l.position.x=this.pixelToMeter(e),l.position.y=this.pixelToMeter(t);var h=this.world.CreateBody(l);return h.CreateFixture(a),h.SetUserData(s),h},e.prototype.destroyBody=function(e){this.world.DestroyBody(e)},e.prototype.createCannonBall=function(e,s,a,l,h){var p=Math.cos(a*Math.PI/180)*l,d=Math.sin(a*Math.PI/180)*l,c=9*Math.cos(a*Math.PI/180)*16,y=3*Math.sin(a*Math.PI/180)*16,x=new r;x.density=1,x.friction=1,x.restitution=.6;var u=new i;u.type=o.b2_dynamicBody,x.shape=new n(.625),u.position.x=this.pixelToMeter(e+c),u.position.y=this.pixelToMeter(s+y);var M=this.world.CreateBody(u);return M.CreateFixture(x),M.SetUserData(h),M.ApplyImpulse(new t(p,d),M.GetWorldCenter()),M},e.prototype.meterToPixel=function(e){return e*this.getMeterPixelSize()},e.prototype.pixelToMeter=function(e){return e/this.getMeterPixelSize()},e.prototype.getMeterPixelSize=function(){return 16},e.prototype.getBoardWidthInMeters=function(){return this.gameModel.boardWidth/this.getMeterPixelSize()},e.prototype.getBoardHeightInMeters=function(){return this.gameModel.boardHeight/this.getMeterPixelSize()},e.extend(Object)});
define([],function(){Function.prototype.extend=function(t){var r=this,o=r;if(t!=Object){o=function(t,r){return function(){this.$super=r.prototype.constructor.bind(this);var o=t.prototype.constructor.apply(this,arguments);return this.$super=null,o}}(r,t),o.prototype=r.prototype,r=o;for(var e in t.prototype)r.prototype[e]?!function(t,r,o){var e=r.prototype[t];r.prototype[t]=function(){var r=this.$super;this.$super=o.prototype[t].bind(this);var n=e.apply(this,arguments);return this.$super=r,n}}(e,r,t):!function(t,r,o){r.prototype[t]=function(){var r=this.$super;return this.$super=null,ret=o.prototype[t].apply(this,arguments),this.$super=r,ret}}(e,r,t)}return o.prototype.base=t,o.prototype.instanceOf||(o.prototype.instanceOf=function(t){return this instanceof t?!0:this.base===t?!0:void 0}),o}});
define([],function(){function n(n,t){this.gameModel=n,this.cannonAsset=void 0,this.canonPlane=t,this.movingCannon=!1}return n.prototype.init=function(){},n.prototype.tick=function(){},n.extend(Object)});
define(["./peg","./chute"],function(t,e){function i(t,e,i,s,o){this.gameBoard=t,this.gameModel=e,this.x=i,this.y=s,this.angle=o,this.velocity=25,this.body=void 0,this.ballDead=!1}return i.prototype.init=function(){this.body=this.gameBoard.pegPhysicsManager.createCannonBall(this.x,this.y,this.angle,this.velocity,this)},i.prototype.tick=function(){this.body.IsAwake()||(this.ballDead=!0,this.gameBoard.pegPhysicsManager.destroyBody(this.body),this.gameBoard.roundOver())},i.prototype.collide=function(i){"string"!=typeof i&&(i.instanceOf(t)&&i.trigger(),i.instanceOf(e)&&(this.gameBoard.pegPhysicsManager.destroyBody(this.body),this.ballDead=!0,i.triggered=!0,this.gameBoard.roundOver()))},i.extend(Object)});
define([],function(){function t(t,i,e,n){this.gameModel=t,this.chuteAssets=[],this.chuteAssetsLit=[],this.chuteIndex=e,this.chutePlane=i,this.chuteLocation=n,this.triggered=!1,this.blinking=!1,this.ticking=0,this.chuteNumber=parseInt(30*Math.random())}return t.prototype.init=function(){},t.prototype.roundOver=function(t){t?(this.triggered=!1,this.blinking=!1,this.chuteNumber=parseInt(30*Math.random())):this.triggered&&(this.blinking=!0)},t.prototype.tick=function(){},t.extend(Object)});
define([],function(){function t(t,i,s,o){this.x=s,this.y=o,this.hit=!1,this.gameBoard=t,this.gameModel=i,this.body=void 0,this.bonus=parseInt(400*Math.random()),this.ticking=void 0,this.tocking=0,this.blinking=!1}return t.prototype.init=function(){this.body=this.gameBoard.pegPhysicsManager.createPeg(this.x,this.y,this)},t.prototype.trigger=function(){this.hit||(this.gameModel.interRoundBonus+=this.bonus,this.hit=!0,this.ticking=50)},t.prototype.destroy=function(){this.gameBoard.pegPhysicsManager.destroyBody(this.body)},t.prototype.roundOver=function(t){this.hit&&(t?this.destroy():this.blinking=!0)},t.extend(Object)});
define(["../pieces/cannonBall"],function(n){function o(o,t){this.plane=void 0,this.gameBoard=o,this.gameModel=t,this.cannonBall=void 0,this.cannonBallInstance=n}return o.prototype.init=function(){},o.prototype.roundOver=function(n){n&&(this.cannonBall=void 0)},o.prototype.tick=function(){this.cannonBall&&this.cannonBall.tick()},o.prototype.fireCannonBall=function(){this.cannonBall||(this.cannonBall=new this.cannonBallInstance(this.gameBoard,this.gameModel,this.gameModel.cannonLocation.x,this.gameModel.cannonLocation.y,this.gameModel.cannonAngle+90),this.cannonBall.init())},o.extend(Object)});
define(["../pieces/cannon"],function(n){function t(t,o){this.plane=void 0,this.gameModel=o,this.gameBoard=t,this.cannon=new n(this.gameModel,this)}return t.prototype.init=function(){this.cannon.init()},t.prototype.roundOver=function(n){n&&(this.gameModel.cannonAngle=0)},t.prototype.tick=function(){this.cannon.tick()},t.prototype.shootBall=function(){this.gameBoard.fireCannon()},t.extend(Object)});
define(["../pieces/chute"],function(e){function t(t,i){this.backPlane=void 0,this.frontPlane=void 0,this.gameModel=i,this.gameBoard=t,this.bumpersSize=void 0,this.bucketsSize=void 0,this.chutes=[],this.chuteInstance=e}return t.prototype.init=function(){this.bumpersSize={width:434,height:65},this.bucketsSize={width:399,height:47};for(var e=[],t=14,i=55,h=this.bucketsSize.height,s=31,a=18,r=0;5>r;r++){var g=a+r*(i+s);e.push({x:g,y:this.gameBoard.gameModel.boardHeight-this.bucketsSize.height})}var o=[];o.push({x:0,y:this.gameBoard.gameModel.boardHeight-(this.bumpersSize.height-t),width:a,height:this.bumpersSize.height-t,circleX:0});for(var r=1;5>r;r++){var g=a+i*r+s*(r-1);o.push({x:g,y:this.gameBoard.gameModel.boardHeight-(this.bumpersSize.height-t),width:s,height:this.bumpersSize.height-t,circleX:g+s/2})}o.push({x:a+5*i+4*s,y:this.gameBoard.gameModel.boardHeight-(this.bumpersSize.height-t),width:a,height:this.bumpersSize.height-t,circleX:this.gameBoard.gameModel.boardWidth});for(var r=0;r<e.length;r++){var c=e[r],d=new this.chuteInstance(this.gameModel,this,r,c);d.init(),this.gameBoard.pegPhysicsManager.createRectangleSensor(c.x,c.y,i,h,d),this.chutes.push(d)}for(var r=0;r<o.length;r++){var n=o[r];this.gameBoard.pegPhysicsManager.createRectangleWall(n.x,n.y,n.width,n.height,"wall"),this.gameBoard.pegPhysicsManager.createCircleWall(n.circleX,n.y,t,"wall")}},t.prototype.roundOver=function(e){for(var t=0;t<this.chutes.length;t++){var i=this.chutes[t];i.roundOver(e)}},t.prototype.tick=function(){},t.extend(Object)});
define(["../pieces/peg"],function(e){function t(t,o){this.gameModel=o,this.gameBoard=t,this.pegInstance=e}return t.prototype.init=function(){},t.prototype.roundOver=function(e){for(var t=this.gameModel.pegs.length-1;t>=0;t--){var o=this.gameModel.pegs[t];o.roundOver(e),e&&o.hit&&this.gameModel.pegs.splice(t,1)}},t.prototype.loadPegs=function(e){this.gameModel.pegs=[];for(var t=0;t<e.length;t++){var o,i=e[t];this.gameModel.pegs.push(o=new this.pegInstance(this.gameBoard,this.gameModel,i.x,i.y)),o.init()}},t.prototype.tick=function(){},t.extend(Object)});